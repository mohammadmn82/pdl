<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>JsonNotificationIndex (pdl API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="JsonNotificationIndex (pdl API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gov.usgs.earthquake.aws</a></div>
<h2 title="Class JsonNotificationIndex" class="title">Class JsonNotificationIndex</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../util/DefaultConfigurable.html" title="class in gov.usgs.util">gov.usgs.util.DefaultConfigurable</a></li>
<li>
<ul class="inheritance">
<li><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">gov.usgs.earthquake.util.JDBCConnection</a></li>
<li>
<ul class="inheritance">
<li>gov.usgs.earthquake.aws.JsonNotificationIndex</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code>, <code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">JsonNotificationIndex</span>
extends <a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a>
implements <a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></pre>
<div class="block">Store Notifications in a database.

 Only SQLITE or local development should rely on createSchema.
 Products (data column) have exceeded 64kb, plan accordingly.

 Mysql Schema Example:<br>
 <pre>
 CREATE TABLE IF NOT EXISTS indexer_receiver_index
 (id INTEGER PRIMARY KEY AUTO_INCREMENT
 , created VARCHAR(255)
 , expires VARCHAR(255)
 , source VARCHAR(255)
 , type VARCHAR(255)
 , code VARCHAR(255)
 , updatetime BIGINT
 , url TEXT
 , data LONGTEXT
 , KEY source_index (source)
 , KEY type_index (type)
 , KEY code_index (code)
 , KEY expires_index (expires)
 ) ENGINE=innodb CHARSET=utf8;
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_DRIVER">DEFAULT_DRIVER</a></span></code></th>
<td class="colLast">
<div class="block">Variable for the default driver</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_TABLE">DEFAULT_TABLE</a></span></code></th>
<td class="colLast">
<div class="block">Variable for the default table</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_URL">DEFAULT_URL</a></span></code></th>
<td class="colLast">
<div class="block">Variable for the default URL</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">JsonNotificationIndex</a></span>()</code></th>
<td class="colLast">
<div class="block">Construct a JsonNotification using defaults.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.lang.String)">JsonNotificationIndex</a></span>&#8203;(java.lang.String&nbsp;driver,
                     java.lang.String&nbsp;url)</code></th>
<td class="colLast">
<div class="block">Construct a JsonNotificationIndex with the default table.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String)">JsonNotificationIndex</a></span>&#8203;(java.lang.String&nbsp;driver,
                     java.lang.String&nbsp;url,
                     java.lang.String&nbsp;table)</code></th>
<td class="colLast">
<div class="block">Construct a JsonNotificationIndex with custom driver, url, and table.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addNotification(gov.usgs.earthquake.distribution.Notification)">addNotification</a></span>&#8203;(<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)</code></th>
<td class="colLast">
<div class="block">Add a notification to the index.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configure(gov.usgs.util.Config)">configure</a></span>&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)</code></th>
<td class="colLast">
<div class="block">Implement Configurable</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createSchema()">createSchema</a></span>()</code></th>
<td class="colLast">
<div class="block">Attempt to create schema.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findExpiredNotifications()">findExpiredNotifications</a></span>()</code></th>
<td class="colLast">
<div class="block">Find notifications with expires time before or equal to current time.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(gov.usgs.earthquake.product.ProductId)">findNotifications</a></span>&#8203;(<a href="../product/ProductId.html" title="class in gov.usgs.earthquake.product">ProductId</a>&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Search index for notifications for a specific product.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(java.lang.String,java.lang.String,java.lang.String)">findNotifications</a></span>&#8203;(java.lang.String&nbsp;source,
                 java.lang.String&nbsp;type,
                 java.lang.String&nbsp;code)</code></th>
<td class="colLast">
<div class="block">Search index for notifications.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(java.util.List,java.util.List,java.util.List)">findNotifications</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                 java.util.List&lt;java.lang.String&gt;&nbsp;types,
                 java.util.List&lt;java.lang.String&gt;&nbsp;codes)</code></th>
<td class="colLast">
<div class="block">Search index for notifications.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMissingNotifications(java.lang.String)">getMissingNotifications</a></span>&#8203;(java.lang.String&nbsp;otherTable)</code></th>
<td class="colLast">
<div class="block">This method is used to find notifications present in this index
 but not present in another JsonNotificationIndex table in the same
 database.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNotifications(java.sql.PreparedStatement)">getNotifications</a></span>&#8203;(java.sql.PreparedStatement&nbsp;ps)</code></th>
<td class="colLast">
<div class="block">Parse notifications from a statement ready to be executed.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTable()">getTable</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseNotification(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Long,java.lang.String,java.lang.String)">parseNotification</a></span>&#8203;(java.lang.String&nbsp;created,
                 java.lang.String&nbsp;expires,
                 java.lang.String&nbsp;source,
                 java.lang.String&nbsp;type,
                 java.lang.String&nbsp;code,
                 java.lang.Long&nbsp;updateTime,
                 java.lang.String&nbsp;url,
                 java.lang.String&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Creates and returns a <code>Notification</code> based on the provided data.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeNotification(gov.usgs.earthquake.distribution.Notification)">removeNotification</a></span>&#8203;(<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)</code></th>
<td class="colLast">
<div class="block">Remove notification from index.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#schemaExists()">schemaExists</a></span>()</code></th>
<td class="colLast">
<div class="block">Check whether schema exists.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTable(java.lang.String)">setTable</a></span>&#8203;(java.lang.String&nbsp;table)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startup()">startup</a></span>()</code></th>
<td class="colLast">
<div class="block">After normal startup, check whether schema exists and attempt to create.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.earthquake.util.JDBCConnection">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;gov.usgs.earthquake.util.<a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></h3>
<code><a href="../util/JDBCConnection.html#beginTransaction()">beginTransaction</a>, <a href="../util/JDBCConnection.html#close()">close</a>, <a href="../util/JDBCConnection.html#commitTransaction()">commitTransaction</a>, <a href="../util/JDBCConnection.html#connect()">connect</a>, <a href="../util/JDBCConnection.html#getConnection()">getConnection</a>, <a href="../util/JDBCConnection.html#getDriver()">getDriver</a>, <a href="../util/JDBCConnection.html#getUrl()">getUrl</a>, <a href="../util/JDBCConnection.html#rollbackTransaction()">rollbackTransaction</a>, <a href="../util/JDBCConnection.html#setDriver(java.lang.String)">setDriver</a>, <a href="../util/JDBCConnection.html#setUrl(java.lang.String)">setUrl</a>, <a href="../util/JDBCConnection.html#shutdown()">shutdown</a>, <a href="../util/JDBCConnection.html#verifyConnection()">verifyConnection</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.util.DefaultConfigurable">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;gov.usgs.util.<a href="../../util/DefaultConfigurable.html" title="class in gov.usgs.util">DefaultConfigurable</a></h3>
<code><a href="../../util/DefaultConfigurable.html#getName()">getName</a>, <a href="../../util/DefaultConfigurable.html#setName(java.lang.String)">setName</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.util.Configurable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;gov.usgs.util.<a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></h3>
<code><a href="../../util/Configurable.html#getName()">getName</a>, <a href="../../util/Configurable.html#setName(java.lang.String)">setName</a>, <a href="../../util/Configurable.html#shutdown()">shutdown</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="DEFAULT_DRIVER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_DRIVER</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_DRIVER</pre>
<div class="block">Variable for the default driver</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.earthquake.aws.JsonNotificationIndex.DEFAULT_DRIVER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DEFAULT_TABLE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_TABLE</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_TABLE</pre>
<div class="block">Variable for the default table</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.earthquake.aws.JsonNotificationIndex.DEFAULT_TABLE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DEFAULT_URL">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_URL</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_URL</pre>
<div class="block">Variable for the default URL</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.earthquake.aws.JsonNotificationIndex.DEFAULT_URL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>JsonNotificationIndex</h4>
<pre>public&nbsp;JsonNotificationIndex()</pre>
<div class="block">Construct a JsonNotification using defaults.</div>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>JsonNotificationIndex</h4>
<pre>public&nbsp;JsonNotificationIndex&#8203;(java.lang.String&nbsp;driver,
                             java.lang.String&nbsp;url)</pre>
<div class="block">Construct a JsonNotificationIndex with the default table.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>driver</code> - Driver to use</dd>
<dd><code>url</code> - URL to use</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JsonNotificationIndex</h4>
<pre>public&nbsp;JsonNotificationIndex&#8203;(java.lang.String&nbsp;driver,
                             java.lang.String&nbsp;url,
                             java.lang.String&nbsp;table)</pre>
<div class="block">Construct a JsonNotificationIndex with custom driver, url, and table.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>driver</code> - Driver to use</dd>
<dd><code>url</code> - URL to use</dd>
<dd><code>table</code> - Table to use</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getTable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTable</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getTable()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>table</dd>
</dl>
</li>
</ul>
<a id="setTable(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTable</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setTable&#8203;(java.lang.String&nbsp;table)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - Table to set</dd>
</dl>
</li>
</ul>
<a id="configure(gov.usgs.util.Config)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configure</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;configure&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)
               throws java.lang.Exception</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../util/JDBCConnection.html#configure(gov.usgs.util.Config)">JDBCConnection</a></code></span></div>
<div class="block">Implement Configurable</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../util/Configurable.html#configure(gov.usgs.util.Config)">configure</a></code>&nbsp;in interface&nbsp;<code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#configure(gov.usgs.util.Config)">configure</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - Config to set driver and URL in</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Exception</dd>
</dl>
</li>
</ul>
<a id="startup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startup</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;startup()
             throws java.lang.Exception</pre>
<div class="block">After normal startup, check whether schema exists and attempt to create.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../util/Configurable.html#startup()">startup</a></code>&nbsp;in interface&nbsp;<code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#startup()">startup</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="schemaExists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>schemaExists</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;schemaExists()
                     throws java.lang.Exception</pre>
<div class="block">Check whether schema exists.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="createSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSchema</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;createSchema()
                  throws java.lang.Exception</pre>
<div class="block">Attempt to create schema.

 Only supports sqlite or mysql.  When not using sqlite, relying on this
 method is only recommended for local development.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="addNotification(gov.usgs.earthquake.distribution.Notification)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNotification</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addNotification&#8203;(<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)
                     throws java.lang.Exception</pre>
<div class="block">Add a notification to the index.

 TrackerURLs are ignored.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#addNotification(gov.usgs.earthquake.distribution.Notification)">addNotification</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notification</code> - To be added to index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="removeNotification(gov.usgs.earthquake.distribution.Notification)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeNotification</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeNotification&#8203;(<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)
                        throws java.lang.Exception</pre>
<div class="block">Remove notification from index.

 Tracker URLs are ignored.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#removeNotification(gov.usgs.earthquake.distribution.Notification)">removeNotification</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notification</code> - to be removed from index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="findNotifications(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(java.lang.String&nbsp;source,
                                                      java.lang.String&nbsp;type,
                                                      java.lang.String&nbsp;code)
                                               throws java.lang.Exception</pre>
<div class="block">Search index for notifications.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#findNotifications(java.lang.String,java.lang.String,java.lang.String)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>source</code> - source, or null for all sources.</dd>
<dd><code>type</code> - type, or null for all types.</dd>
<dd><code>code</code> - code, or null for all codes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list with matching notifications, empty if not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="findNotifications(java.util.List,java.util.List,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                                                      java.util.List&lt;java.lang.String&gt;&nbsp;types,
                                                      java.util.List&lt;java.lang.String&gt;&nbsp;codes)
                                               throws java.lang.Exception</pre>
<div class="block">Search index for notifications.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#findNotifications(java.util.List,java.util.List,java.util.List)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sources</code> - sources, or null for all sources.</dd>
<dd><code>types</code> - types, or null for all types.</dd>
<dd><code>codes</code> - codes, or null for all codes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list with matching notifications, empty if not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="findExpiredNotifications()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findExpiredNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findExpiredNotifications()
                                                      throws java.lang.Exception</pre>
<div class="block">Find notifications with expires time before or equal to current time.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#findExpiredNotifications()">findExpiredNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list with matching notifications, empty if not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="findNotifications(gov.usgs.earthquake.product.ProductId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(<a href="../product/ProductId.html" title="class in gov.usgs.earthquake.product">ProductId</a>&nbsp;id)
                                               throws java.lang.Exception</pre>
<div class="block">Search index for notifications for a specific product.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../distribution/NotificationIndex.html#findNotifications(gov.usgs.earthquake.product.ProductId)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="../distribution/NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the product id to search.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list with matching notifications, empty if not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="getMissingNotifications(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMissingNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;getMissingNotifications&#8203;(java.lang.String&nbsp;otherTable)
                                                     throws java.lang.Exception</pre>
<div class="block">This method is used to find notifications present in this index
 but not present in another JsonNotificationIndex table in the same
 database.

 This is used to optimize the queuing process at startup and returns
 DefaultNotifications.  The receiver process will look up the actual
 notification object during processing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>otherTable</code> - name of table in same database.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of notifications found in this indexes table, but not found in the
     other table.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="getNotifications(java.sql.PreparedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotifications</h4>
<pre class="methodSignature">protected&nbsp;java.util.List&lt;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;getNotifications&#8203;(java.sql.PreparedStatement&nbsp;ps)
                                                 throws java.lang.Exception</pre>
<div class="block">Parse notifications from a statement ready to be executed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ps</code> - PreparedStatement to be parsed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of notifications</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="parseNotification(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Long,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>parseNotification</h4>
<pre class="methodSignature">protected&nbsp;<a href="../distribution/Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;parseNotification&#8203;(java.lang.String&nbsp;created,
                                         java.lang.String&nbsp;expires,
                                         java.lang.String&nbsp;source,
                                         java.lang.String&nbsp;type,
                                         java.lang.String&nbsp;code,
                                         java.lang.Long&nbsp;updateTime,
                                         java.lang.String&nbsp;url,
                                         java.lang.String&nbsp;data)
                                  throws java.lang.Exception</pre>
<div class="block">Creates and returns a <code>Notification</code> based on the provided data.

 <ul>
 <li>Return a JSONNotification if <code>created</code> and <code>data</code>
 are set
 <li>Return a URLNotification if <code>url</code> is set
 <li>Otherwise, return a DefaultNotification
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>created</code> - When created</dd>
<dd><code>expires</code> - When notification expires</dd>
<dd><code>source</code> - sources</dd>
<dd><code>type</code> - types</dd>
<dd><code>code</code> - codes</dd>
<dd><code>updateTime</code> - updateTime</dd>
<dd><code>url</code> - URL</dd>
<dd><code>data</code> - data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Notification, JSONNotification, URLNotification, or DefaultNotification</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
