<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>JDBCNotificationIndex (pdl API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="JDBCNotificationIndex (pdl API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gov.usgs.earthquake.distribution</a></div>
<h2 title="Class JDBCNotificationIndex" class="title">Class JDBCNotificationIndex</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../util/DefaultConfigurable.html" title="class in gov.usgs.util">gov.usgs.util.DefaultConfigurable</a></li>
<li>
<ul class="inheritance">
<li><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">gov.usgs.earthquake.util.JDBCConnection</a></li>
<li>
<ul class="inheritance">
<li>gov.usgs.earthquake.distribution.JDBCNotificationIndex</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code>, <code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">JDBCNotificationIndex</span>
extends <a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a>
implements <a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></pre>
<div class="block">Stores and retrieves Notifications.

 This is typically used by a NotificationReceiver to track its Notifications,
 but may also be used by NotificationListeners. Each object should maintain a
 separate NotificationIndex.

 This implementation uses a SQLite Database as the index.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#JDBC_FILE_PROPERTY">JDBC_FILE_PROPERTY</a></span></code></th>
<td class="colLast">
<div class="block">This is the property key used in the configuration file to specify a
 different SQLite database file.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">JDBCNotificationIndex</a></span>()</code></th>
<td class="colLast">
<div class="block">Default, no-arg constructor.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(gov.usgs.util.Config)">JDBCNotificationIndex</a></span>&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)</code></th>
<td class="colLast">
<div class="block">Constructor called from the config object conforming to the
 <code>Configurable</code> interface specification.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String)">JDBCNotificationIndex</a></span>&#8203;(java.lang.String&nbsp;filename)</code></th>
<td class="colLast">
<div class="block">Constructor call from filename, where filename is jdbc index file
 If null, then index file defaults</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addNotification(gov.usgs.earthquake.distribution.Notification)">addNotification</a></span>&#8203;(<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)</code></th>
<td class="colLast">
<div class="block">Add a notification to the index.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configure(gov.usgs.util.Config)">configure</a></span>&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)</code></th>
<td class="colLast">
<div class="block">Reads the given <code>config</code> object and sets values appropriately.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected java.sql.Connection</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connect()">connect</a></span>()</code></th>
<td class="colLast">
<div class="block">Connect to the database.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findExpiredNotifications()">findExpiredNotifications</a></span>()</code></th>
<td class="colLast">
<div class="block">Search the index for expired notifications.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(gov.usgs.earthquake.product.ProductId)">findNotifications</a></span>&#8203;(<a href="../product/ProductId.html" title="class in gov.usgs.earthquake.product">ProductId</a>&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Search the index for notifications matching id.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(java.lang.String,java.lang.String,java.lang.String)">findNotifications</a></span>&#8203;(java.lang.String&nbsp;source,
                 java.lang.String&nbsp;type,
                 java.lang.String&nbsp;code)</code></th>
<td class="colLast">
<div class="block">Search the index for notifications matching the sources, types, and
 codes.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNotifications(java.util.List,java.util.List,java.util.List)">findNotifications</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                 java.util.List&lt;java.lang.String&gt;&nbsp;types,
                 java.util.List&lt;java.lang.String&gt;&nbsp;codes)</code></th>
<td class="colLast">
<div class="block">Search the index for notifications matching the sources, types, and
 codes.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected java.sql.PreparedStatement</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCorrectStatement(java.util.List,java.util.List,java.util.List)">getCorrectStatement</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                   java.util.List&lt;java.lang.String&gt;&nbsp;types,
                   java.util.List&lt;java.lang.String&gt;&nbsp;codes)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNotifications(java.sql.PreparedStatement)">getNotifications</a></span>&#8203;(java.sql.PreparedStatement&nbsp;ps)</code></th>
<td class="colLast">
<div class="block">Executes a prepared statement and parses the result set into a list of
 notifications.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected <a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseNotification(java.lang.String,java.lang.String,java.lang.String,java.sql.Date,java.sql.Date,java.lang.String,java.lang.String)">parseNotification</a></span>&#8203;(java.lang.String&nbsp;source,
                 java.lang.String&nbsp;type,
                 java.lang.String&nbsp;code,
                 java.sql.Date&nbsp;update,
                 java.sql.Date&nbsp;expires,
                 java.lang.String&nbsp;tracker,
                 java.lang.String&nbsp;download)</code></th>
<td class="colLast">
<div class="block">Creates and returns a <code>Notification</code> based on the provided
 data.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeNotification(gov.usgs.earthquake.distribution.Notification)">removeNotification</a></span>&#8203;(<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)</code></th>
<td class="colLast">
<div class="block">Remove a notification from the index.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the JDBC connection and all it's associated prepared statements.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startup()">startup</a></span>()</code></th>
<td class="colLast">
<div class="block">Connects to the JDBC DB index and prepares the DML/Query statements that
 will execute at runtime.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.earthquake.util.JDBCConnection">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;gov.usgs.earthquake.util.<a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></h3>
<code><a href="../util/JDBCConnection.html#beginTransaction()">beginTransaction</a>, <a href="../util/JDBCConnection.html#close()">close</a>, <a href="../util/JDBCConnection.html#commitTransaction()">commitTransaction</a>, <a href="../util/JDBCConnection.html#getConnection()">getConnection</a>, <a href="../util/JDBCConnection.html#getDriver()">getDriver</a>, <a href="../util/JDBCConnection.html#getUrl()">getUrl</a>, <a href="../util/JDBCConnection.html#rollbackTransaction()">rollbackTransaction</a>, <a href="../util/JDBCConnection.html#setDriver(java.lang.String)">setDriver</a>, <a href="../util/JDBCConnection.html#setUrl(java.lang.String)">setUrl</a>, <a href="../util/JDBCConnection.html#verifyConnection()">verifyConnection</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.util.DefaultConfigurable">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;gov.usgs.util.<a href="../../util/DefaultConfigurable.html" title="class in gov.usgs.util">DefaultConfigurable</a></h3>
<code><a href="../../util/DefaultConfigurable.html#getName()">getName</a>, <a href="../../util/DefaultConfigurable.html#setName(java.lang.String)">setName</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gov.usgs.util.Configurable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;gov.usgs.util.<a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></h3>
<code><a href="../../util/Configurable.html#getName()">getName</a>, <a href="../../util/Configurable.html#setName(java.lang.String)">setName</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="JDBC_FILE_PROPERTY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JDBC_FILE_PROPERTY</h4>
<pre>protected static final&nbsp;java.lang.String JDBC_FILE_PROPERTY</pre>
<div class="block">This is the property key used in the configuration file to specify a
 different SQLite database file. If this file doesn't exist it will be
 created at startup time</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.earthquake.distribution.JDBCNotificationIndex.JDBC_FILE_PROPERTY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>JDBCNotificationIndex</h4>
<pre>public&nbsp;JDBCNotificationIndex()
                      throws java.lang.Exception</pre>
<div class="block">Default, no-arg constructor. This just ensures the JDBC SQLite driver is
 appropriately on the classpath for proper runtime execution. This
 probably will not get called directly in favor of the configurable
 constructor.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If the JDBC driver class is not found.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#JDBC_DRIVER_CLASS"><code>JDBC_DRIVER_CLASS</code></a></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>JDBCNotificationIndex</h4>
<pre>public&nbsp;JDBCNotificationIndex&#8203;(java.lang.String&nbsp;filename)
                      throws java.lang.Exception</pre>
<div class="block">Constructor call from filename, where filename is jdbc index file
 If null, then index file defaults</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - String - What will be the index file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(gov.usgs.util.Config)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JDBCNotificationIndex</h4>
<pre>public&nbsp;JDBCNotificationIndex&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)
                      throws java.lang.Exception</pre>
<div class="block">Constructor called from the config object conforming to the
 <code>Configurable</code> interface specification. This internally calls
 its no-arg constructor then configures itself.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - The config object from which this instance will be configured.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If the JDBC driver class is not found.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../util/Configurable.html" title="interface in gov.usgs.util"><code>Configurable</code></a>, 
<a href="#JDBC_DRIVER_CLASS"><code>JDBC_DRIVER_CLASS</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="configure(gov.usgs.util.Config)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configure</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;configure&#8203;(<a href="../../util/Config.html" title="class in gov.usgs.util">Config</a>&nbsp;config)
               throws java.lang.Exception</pre>
<div class="block">Reads the given <code>config</code> object and sets values appropriately.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../util/Configurable.html#configure(gov.usgs.util.Config)">configure</a></code>&nbsp;in interface&nbsp;<code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#configure(gov.usgs.util.Config)">configure</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - The config object from which this instance will be configured.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Exception</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../util/Configurable.html" title="interface in gov.usgs.util"><code>Configurable</code></a></dd>
</dl>
</li>
</ul>
<a id="connect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre class="methodSignature">protected&nbsp;java.sql.Connection&nbsp;connect()
                               throws java.lang.Exception</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../util/JDBCConnection.html#connect()">JDBCConnection</a></code></span></div>
<div class="block">Connect to the database.

 Sub-classes determine how connection is made.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#connect()">connect</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the connection.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if unable to connect.</dd>
</dl>
</li>
</ul>
<a id="startup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startup</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;startup()
             throws java.lang.Exception</pre>
<div class="block">Connects to the JDBC DB index and prepares the DML/Query statements that
 will execute at runtime. If the JDBC DB index file does not exist then an
 empty schema will be copied out of the executing JAR file to be used.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../util/Configurable.html#startup()">startup</a></code>&nbsp;in interface&nbsp;<code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#startup()">startup</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../util/Configurable.html" title="interface in gov.usgs.util"><code>Configurable</code></a></dd>
</dl>
</li>
</ul>
<a id="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;shutdown()
              throws java.lang.Exception</pre>
<div class="block">Closes the JDBC connection and all it's associated prepared statements.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../util/Configurable.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../util/Configurable.html" title="interface in gov.usgs.util">Configurable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../util/JDBCConnection.html#shutdown()">shutdown</a></code>&nbsp;in class&nbsp;<code><a href="../util/JDBCConnection.html" title="class in gov.usgs.earthquake.util">JDBCConnection</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../util/Configurable.html" title="interface in gov.usgs.util"><code>Configurable</code></a></dd>
</dl>
</li>
</ul>
<a id="addNotification(gov.usgs.earthquake.distribution.Notification)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNotification</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addNotification&#8203;(<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)
                     throws java.lang.Exception</pre>
<div class="block">Add a notification to the index.

 If an identical notification is already in the index, the implementation
 may choose whether or not to store the duplicate information.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#addNotification(gov.usgs.earthquake.distribution.Notification)">addNotification</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notification</code> - the notification to add.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while storing the notification.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
<a id="removeNotification(gov.usgs.earthquake.distribution.Notification)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeNotification</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeNotification&#8203;(<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;notification)
                        throws java.lang.Exception</pre>
<div class="block">Remove a notification from the index.

 All matching notifications should be removed from the index.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#removeNotification(gov.usgs.earthquake.distribution.Notification)">removeNotification</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notification</code> - the notification to remove.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while removing the notification.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
<a id="findNotifications(gov.usgs.earthquake.product.ProductId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(<a href="../product/ProductId.html" title="class in gov.usgs.earthquake.product">ProductId</a>&nbsp;id)
                                               throws java.lang.Exception</pre>
<div class="block">Search the index for notifications matching id.

 If more than one notification matches, all should be returned.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#findNotifications(gov.usgs.earthquake.product.ProductId)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the ProductId to find.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of matching notifications.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while searching the index.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
<a id="findNotifications(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(java.lang.String&nbsp;source,
                                                      java.lang.String&nbsp;type,
                                                      java.lang.String&nbsp;code)
                                               throws java.lang.Exception</pre>
<div class="block">Search the index for notifications matching the sources, types, and
 codes.

 Only one notification for each unique ProductId
 (source+type+code+updateTime) should be returned. If sources, types,
 and/or codes are null, that parameter should be considered a wildcard. If
 sources, types, and codes are all null, a notification for each unique
 ProductId in the index should be returned.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#findNotifications(java.lang.String,java.lang.String,java.lang.String)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>source</code> - sources to include, or all if null.</dd>
<dd><code>type</code> - types to include, or all if null.</dd>
<dd><code>code</code> - codes to include, or all if null.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of matching notifications.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while searching the index.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
<a id="findNotifications(java.util.List,java.util.List,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findNotifications&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                                                      java.util.List&lt;java.lang.String&gt;&nbsp;types,
                                                      java.util.List&lt;java.lang.String&gt;&nbsp;codes)
                                               throws java.lang.Exception</pre>
<div class="block">Search the index for notifications matching the sources, types, and
 codes.

 Only one notification for each unique ProductId
 (source+type+code+updateTime) should be returned. If sources, types,
 and/or codes are null, that parameter should be considered a wildcard. If
 sources, types, and codes are all null, a notification for each unique
 ProductId in the index should be returned.

 This implementation require synchronization to prevent SQLExceptions
 caused by concurrent access. SQLite locks the database whenever there is
 an open ResultSet resource. So even read queries can end up causing SQL
 concurrent access problems.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#findNotifications(java.util.List,java.util.List,java.util.List)">findNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sources</code> - sources to include, or all if null.</dd>
<dd><code>types</code> - types to include, or all if null.</dd>
<dd><code>codes</code> - codes to include, or all if null.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of matching notifications.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while searching the index.</dd>
</dl>
</li>
</ul>
<a id="findExpiredNotifications()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findExpiredNotifications</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;findExpiredNotifications()
                                                      throws java.lang.Exception</pre>
<div class="block">Search the index for expired notifications.

 All expired notifications, even if duplicate, should be returned.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="NotificationIndex.html#findExpiredNotifications()">findExpiredNotifications</a></code>&nbsp;in interface&nbsp;<code><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution">NotificationIndex</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of expired notifications.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if an error occurs while searching the index.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="NotificationIndex.html" title="interface in gov.usgs.earthquake.distribution"><code>NotificationIndex</code></a></dd>
</dl>
</li>
</ul>
<a id="getNotifications(java.sql.PreparedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotifications</h4>
<pre class="methodSignature">protected&nbsp;java.util.List&lt;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&gt;&nbsp;getNotifications&#8203;(java.sql.PreparedStatement&nbsp;ps)
                                                 throws java.lang.Exception</pre>
<div class="block">Executes a prepared statement and parses the result set into a list of
 notifications. The prepared statement can have any set of criteria and
 all required parameters should be bound before calling this method. The
 result set of the prepared statement must include at least: -
 PRODUCT_SOURCE_COLUMN<br>
 - PRODUCT_TYPE_COLUMN<br>
 - PRODUCT_CODE_COLUMN<br>
 - PRODUCT_UPDATE_COLUMN<br>
 - EXPIRATION_DATE_COLUMN<br>
 - TRACKER_URL_COLUMN<br>
 - PRODUCT_URL_COLUMN<br></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ps</code> - The prepared statement to execute.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of notifications returned by executing the statement.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If a <code>SQLException</code> occurs.</dd>
</dl>
</li>
</ul>
<a id="parseNotification(java.lang.String,java.lang.String,java.lang.String,java.sql.Date,java.sql.Date,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseNotification</h4>
<pre class="methodSignature">protected&nbsp;<a href="Notification.html" title="interface in gov.usgs.earthquake.distribution">Notification</a>&nbsp;parseNotification&#8203;(java.lang.String&nbsp;source,
                                         java.lang.String&nbsp;type,
                                         java.lang.String&nbsp;code,
                                         java.sql.Date&nbsp;update,
                                         java.sql.Date&nbsp;expires,
                                         java.lang.String&nbsp;tracker,
                                         java.lang.String&nbsp;download)
                                  throws java.lang.Exception</pre>
<div class="block">Creates and returns a <code>Notification</code> based on the provided
 data. If the <code>download</code> string references a valid URL, then a
 <code>URLNotification</code> is created, otherwise a
 <code>DefaultNotification</code> is created.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>source</code> - The product source string.</dd>
<dd><code>type</code> - The product type string.</dd>
<dd><code>code</code> - The product code string.</dd>
<dd><code>update</code> - The latest update date/time for the product.</dd>
<dd><code>expires</code> - The date/time when this notification expires.</dd>
<dd><code>tracker</code> - A reference to a URL where information about this product is
            posted.</dd>
<dd><code>download</code> - A reference to a URL where one can download this product, or
            <code>null</code> if this is not a
            <code>URLNotification</code>.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The generated notification, or <code>null</code> if one could not
         be created (but an exception did not occur).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If the <code>tracker</code> string cannot be successfully
             parsed into a valid URL.</dd>
</dl>
</li>
</ul>
<a id="getCorrectStatement(java.util.List,java.util.List,java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCorrectStatement</h4>
<pre class="methodSignature">protected&nbsp;java.sql.PreparedStatement&nbsp;getCorrectStatement&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;sources,
                                                         java.util.List&lt;java.lang.String&gt;&nbsp;types,
                                                         java.util.List&lt;java.lang.String&gt;&nbsp;codes)
                                                  throws java.lang.Exception</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sources</code> - List string of sources</dd>
<dd><code>types</code> - List string of types</dd>
<dd><code>codes</code> - List string of codes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>prepared query based on what is/is not null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if error occurs</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
